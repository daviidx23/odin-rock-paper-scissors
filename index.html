<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
</head>
<body>
    <div class="buttons">
        <button id="btnR">Rock</button>
        <button id="btnP">Paper</button>
        <button id="btnS">Scissors</button>
    </div>
    <div class="results">

    </div>


    <script>
        let userScore = 0;
        let computerScore = 0;
        
        function getComputerChoice(){
            const choice = ["Rock","Paper","Scissors"];
            const random = Math.floor(Math.random() * choice.length);

            return choice[random];
        }

        function playRound(computerChoice,userChoice){
            if(computerChoice=="Rock"){
               if(userChoice=="SCISSORS"){
                    return 1;
               }
               else if(userChoice=="PAPER"){
                    return 2;
               } 
               else if(userChoice=="ROCK"){
                    return 0;
               }
            }
            else if(computerChoice=="Paper"){
                if(userChoice=="SCISSORS"){
                    return 2;
               }
               else if(userChoice=="PAPER"){
                    return 0;
               } 
               else if(userChoice=="ROCK"){
                    return 1;
               }
            }
            else if(computerChoice=="Scissors"){
                if(userChoice=="SCISSORS"){
                    return 0;
               }
               else if(userChoice=="PAPER"){
                    return 1;
               } 
               else if(userChoice=="ROCK"){
                    return 2;
               }
            }
        }



        function showResults(value,para){  
            if(value==0){
                computerScore++;
                userScore++;
            }
            else if(value==1){
                computerScore++;
            }
            else{
                userScore++;
            }
            para.innerText = `User score = ${userScore} || Computer score = ${computerScore}`;
            if(userScore>=5||computerScore>=5){
                if(userScore>computerScore){
                    win.innerText = "You Win!";
                }
                else{
                    win.innerText = "You Loose!";
                }
                console.log(win);
                return true;
            }
        }
        
        const div = document.querySelector('.results');
        const para = document.createElement('p');
        const buttonRock = document.querySelector('#btnR');
        const buttonPaper = document.querySelector('#btnP');
        const buttonScissors = document.querySelector('#btnS');
        const win = document.createElement('p');
        let finish = false;
        let userChoice = "";

        console.log(finish);

        buttonRock.addEventListener('click',() =>{
            const computerChoice = getComputerChoice();
            const round = playRound(computerChoice,'ROCK');
            finish = showResults(round,para);
            if(finish){
                buttonRock.disabled = true;
                buttonPaper.disabled = true;
                buttonScissors.disabled = true;
            };
        });

        buttonPaper.addEventListener('click',() =>{
            const computerChoice = getComputerChoice();
            const round = playRound(computerChoice,'PAPER');
            finish = showResults(round,para);
            if(finish){
                buttonRock.disabled = true;
                buttonPaper.disabled = true;
                buttonScissors.disabled = true;             
            };
        });

        buttonScissors.addEventListener('click',() =>{
            const computerChoice = getComputerChoice();
            const round = playRound(computerChoice,'SCISSORS');
            finish = showResults(round,para);
            if(finish){
                buttonRock.disabled = true;
                buttonPaper.disabled = true;
                buttonScissors.disabled = true;
            };
        });

        div.appendChild(para);
        div.appendChild(win);
    </script>
</body>
</html>